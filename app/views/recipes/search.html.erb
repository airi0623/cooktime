<%= render "shared/header" %>
<%= render "shared/fixed-btn" %>

<div class="container">
  <!-- 検索結果 -----------------------------------------------------------> 
  <div class="list-wrap">
    <h2>検索結果</h2>
    <div class='recipe-contents'>
      <ul class='row'>
      <!-- レシピ一つづつ -->
        <% @results.each do |recipe|%>
          <li class='list col-md-3 col-6'>
            <%= link_to recipe_path(recipe.id) do %>
              <!-- いいねトマト -->
              <div class='like-box'>
                <div><%= image_tag "icon-star-light_green.png", alt:"star", class:"icons-type"%></div>
                <div class="like-box">お気に入り<span><%= recipe.likes.length %></span></div>
              </div> 
              <!-- タイトル -->
              <div class="recipe-title">
                <h3>
                  <%= recipe.title %>
                </h3>
              </div>  
              <!-- 画像 -->
              <div class='recipe-img-index'>
                <%= image_tag recipe.images[0].url, class: "img-recipe" %>
              </div>
              <!--画像の下の細かいコンテンツ-->
              <div class='recipe-info'>
                <table class="table-index" width="100%">
                  <tr>
                    <td class='index recipe-category'>
                      <%= image_tag "icon-category.png", alt:"料理画像", class:"icons-type"%>
                      <span><%= recipe.category.name %></span>
                    </td>
                    <td class='index recipe-time'>
                      <%= image_tag "icon-time.png", alt:"料理画像", class:"icons-type"%>
                      <span>約<%= recipe.time %>分</span>
                    </td>
                  </tr>
                  <tr>
                    <td class='index recipe-days'>
                      <%= image_tag "icon-cold.png", alt:"料理画像", class:"icons-type"%>
                      <span>約<%= recipe.cold_date%>日</span>
                    </td>
                    <td class='index recipe-days'>
                      <%= image_tag "icon-frozen.png", alt:"料理画像", class:"icons-type"%>
                      <span>約<%= recipe.frozen_date %>日</span>
                    </td>
                  </tr>
                </table>
              </div>
            <% end %>
          </li>
        <% end %>
      </ul>
    </div>
  </div>
  <!-- 検索ボックス --------------------------------------------------------->
  <div class="search-contents">
    <h2>レシピ検索</h2>
    <%= search_form_for @p, url: recipes_search_path do |f| %>
      <%= f.label :title_or_feature_cont, 'キーワード', class:'col-md-3' %>
      <%= f.text_field :title_or_feature_cont, class: 'input-search col-md-8' %>
      <br>
      <%= f.label :category_id_eq, 'カテゴリー', class:'col-md-3' %>
      <%= f.collection_select :category_id_eq, Category.all, :id, :name,{prompt: ""},{class:'input-search col-md-8'} %>
      <br>
      <%= f.label :cold_date_gteq, '冷蔵保存期間 (日数)', class:'col-md-3' %>
      <%= f.number_field :cold_date_gteq, class: 'input-search col-md-8' %>
      <br>
      <%= f.label :frozen_date_gteq, '冷凍保存期間 (日数)', class:'col-md-3' %>
      <%= f.number_field :frozen_date_gteq, class: 'input-search col-md-8' %>
      <br>
      <%= f.label :time_lteq, '調理時間 (分)', class:'col-md-3' %>
      <%= f.number_field :time_lteq, class: 'input-search col-md-8' %>
      <br>
      <div class="info-text infotext-space">※検索結果について※<br>
        ● 冷蔵保存期間/冷凍保存期間は入力した日数以上、保存可能なレシピがヒットします。<br>
        ● 調理時間は入力した時間以下で調理できるレシピがヒットします。
      </div>
      <div class="col-12 search-btn-box">
        <%= f.submit '検索', class: 'btn-search'%>
      </div>
    <% end %>
  </div>
</div>
<%= render "shared/footer" %>